<ion-header>
  <ion-toolbar>
    <ion-title>Public Requests</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row class="top-row"> 
      <ion-col>
        <ion-searchbar name="searchQuery" [debounce]="1000" [(ngModel)]="searchQuery" (ionChange)="getProviderlessPosts()" placeholder="Search for a model" color="light"></ion-searchbar>
      </ion-col> 
      <ion-col size="auto">
        <ion-button class="create-button" (click)="goToCreateRequest()">Create a post</ion-button>
      </ion-col>   
    </ion-row>

  </ion-grid>
  <ion-grid>
     <ion-row>
        <ion-col size="4" *ngFor="let post of posts; let i = index" [class.new-row]="(i + 1) % 3 === 0">
           <!-- Post -->
           <ion-card class="post-card" *ngIf="loaded">
              <ion-card-header>
                <ion-card-title>
                  <img id="profilepicture" src="https://ionicframework.com/docs/img/demos/avatar.svg">
                   {{ getRequesterName(post.requesterId) }}
                </ion-card-title>
              </ion-card-header>
              <ion-card-title class="sub-title">{{post.title}}</ion-card-title>
              <ion-card-content class="description">
                 {{post.description}}
              </ion-card-content>
              <ion-button class="accept-button" (click)="goToAcceptRequest(post.requesterId, post.id)" [disabled]="providerRole == false">Accept</ion-button>
           </ion-card>
        </ion-col>
     </ion-row>
  </ion-grid>
</ion-content>

<!--TODO:-->
<!--

  1. Hardcoded -> actual data
  
  2. Search function for posts
  
  3. Add filter functions

  4. Be able to create a post!

  5. Add description in backend 
  test

-->
